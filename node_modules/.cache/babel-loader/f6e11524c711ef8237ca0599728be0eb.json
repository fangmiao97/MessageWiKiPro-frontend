{"ast":null,"code":"import \"antd/es/modal/style\";\nimport _Modal from \"antd/es/modal\";\nimport \"antd/es/icon/style\";\nimport _Icon from \"antd/es/icon\";\nimport \"antd/es/popover/style\";\nimport _Popover from \"antd/es/popover\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport _classCallCheck from \"/Users/tstudio/IdeaProjects/MKfront/messagewiki2/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/tstudio/IdeaProjects/MKfront/messagewiki2/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/tstudio/IdeaProjects/MKfront/messagewiki2/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/tstudio/IdeaProjects/MKfront/messagewiki2/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/tstudio/IdeaProjects/MKfront/messagewiki2/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport \"antd/es/notification/style\";\nimport _notification from \"antd/es/notification\";\nimport \"antd/es/layout/style\";\nimport _Layout from \"antd/es/layout\";\nimport \"antd/es/menu/style\";\nimport _Menu from \"antd/es/menu\";\nvar _jsxFileName = \"/Users/tstudio/IdeaProjects/MKfront/messagewiki2/src/homepage.js\";\nimport React from \"react\";\nimport { BrowserRouter as Router, Route, Link, Switch, Redirect } from \"react-router-dom\";\nimport PropTypes from 'prop-types';\nimport App from \"./App\";\nimport './homepage.css';\nimport MostHotTopic from \"./MostHotTopic\";\nimport HotMessageTopic from \"./HotMessageTopic\";\nimport AllTopic from \"./AllTopic\";\nimport Involved from \"./Involved\";\nimport Visitor from \"./Visitor\";\nimport Auth from \"./login/auth\";\nimport LoginForm from \"./login/login\";\nimport Notice from \"./Notice\";\nimport UserBlock from \"./UserBlock\";\nimport EditMessage from \"./EditMessage\";\n/**\n *created by Chaoyue\n */\n\nvar auth = new Auth(); //全局Auth对象\n\nvar SubMenu = _Menu.SubMenu;\nvar Header = _Layout.Header,\n    Content = _Layout.Content,\n    Sider = _Layout.Sider;\n\nvar openErrorNotification = function openErrorNotification(type) {\n  _notification[type]({\n    message: '未登录',\n    description: '请点击右上角登录',\n    style: {\n      marginTop: 60\n    }\n  });\n};\n\nvar Homepage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Homepage, _React$Component);\n\n  function Homepage(props) {\n    var _this;\n\n    _classCallCheck(this, Homepage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Homepage).call(this, props));\n\n    _this.handleVisibleChange = function (loginCardVisible) {\n      _this.setState({\n        loginCardVisible: loginCardVisible\n      });\n    };\n\n    _this.handleOk = function () {\n      _this.setState({\n        loading: true\n      });\n\n      setTimeout(function () {\n        _this.setState({\n          loading: false,\n          visible: false\n        });\n      }, 3000);\n    };\n\n    _this.handleCancel = function () {\n      _this.setState({\n        visible: false\n      });\n    };\n\n    _this.state = {\n      loginCardVisible: false,\n      username: auth.username,\n      editFormVisible: false\n    };\n    return _this;\n  }\n\n  _createClass(Homepage, [{\n    key: \"showLoginCard\",\n    value: function showLoginCard() {\n      this.setState({\n        loginCardVisible: true\n      });\n    }\n  }, {\n    key: \"hideLoginCard\",\n    value: function hideLoginCard(loginCardVisible) {\n      this.setState({\n        loginCardVisible: loginCardVisible\n      });\n    }\n  }, {\n    key: \"setUsername\",\n    value: function setUsername(username) {\n      this.setState({\n        username: username\n      });\n    }\n  }, {\n    key: \"submitMessage\",\n    value: function submitMessage() {}\n  }, {\n    key: \"openEditModal\",\n    value: function openEditModal(editFormVisible) {\n      this.setState({\n        editFormVisible: editFormVisible\n      });\n    }\n  }, {\n    key: \"closeEditModal\",\n    value: function closeEditModal() {\n      this.setState({\n        editFormVisible: false\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(Router, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(_Layout, {\n        style: {\n          height: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(Header, {\n        className: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"loginPopover\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(_Popover, {\n        content: React.createElement(LoginForm, Object.assign({\n          auth: auth\n        }, this.props, {\n          hideLoginCard: function hideLoginCard(loginCardVisible) {\n            return _this2.hideLoginCard(loginCardVisible);\n          },\n          setUsername: function setUsername(username) {\n            return _this2.setUsername(username);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        })),\n        title: \"\\u767B\\u5F55\",\n        trigger: \"click\",\n        visible: this.state.loginCardVisible,\n        onVisibleChange: this.handleVisibleChange,\n        placement: \"bottomRight\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(_Button, {\n        type: \"primary\",\n        shape: \"circle\",\n        icon: \"login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      })))), React.createElement(_Layout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(Sider, {\n        width: 230,\n        style: {\n          background: '#fff'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(UserBlock, {\n        username: this.state.username,\n        openEditModal: function openEditModal(editFormVisible) {\n          return _this2.openEditModal(editFormVisible);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }), React.createElement(_Menu, {\n        mode: \"inline\",\n        defaultSelectedKeys: ['0'],\n        style: {\n          height: '100%',\n          borderRight: 0\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(_Menu.Item, {\n        key: \"0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(_Icon, {\n        type: \"smile\",\n        theme: \"twoTone\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }), \"\\u6E38\\u5BA2\\u533A\", React.createElement(Link, {\n        to: \"/visitor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      })), React.createElement(_Menu.Item, {\n        key: \"1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(_Icon, {\n        type: \"smile\",\n        theme: \"twoTone\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }), \"\\u6700\\u70ED\\u4E3B\\u9898\", React.createElement(Link, {\n        to: \"/mosthottopic\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      })), React.createElement(_Menu.Item, {\n        key: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(_Icon, {\n        type: \"smile\",\n        theme: \"twoTone\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }), \"\\u6700\\u70ED\\u7559\\u8A00\", React.createElement(Link, {\n        to: \"/hotmessagetopic\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      })), React.createElement(_Menu.Item, {\n        key: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(_Icon, {\n        type: \"smile\",\n        theme: \"twoTone\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }), \"\\u5168\\u90E8\\u4E3B\\u9898\", React.createElement(Link, {\n        to: \"/alltopic\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      })), React.createElement(_Menu.Item, {\n        key: \"4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(_Icon, {\n        type: \"smile\",\n        theme: \"twoTone\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }), \"\\u6211\\u53C2\\u4E0E\\u7684\", React.createElement(Link, {\n        to: \"/involved\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      })))), React.createElement(_Layout, {\n        style: {\n          padding: '10px 10px 10px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(Content, {\n        style: {\n          background: '#fff',\n          padding: 24,\n          margin: 0,\n          minHeight: 280\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(Route, {\n        path: \"/visitor\",\n        component: Visitor,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/mosthottopic\",\n        render: function render(props) {\n          if (auth.isLogin) {\n            return React.createElement(MostHotTopic, Object.assign({}, props, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 158\n              },\n              __self: this\n            }));\n          } else {\n            openErrorNotification('error');\n            return React.createElement(Redirect, {\n              to: \"/notice\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 161\n              },\n              __self: this\n            });\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/hotmessagetopic\",\n        render: function render(props) {\n          if (auth.isLogin) {\n            return React.createElement(HotMessageTopic, Object.assign({}, props, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 166\n              },\n              __self: this\n            }));\n          } else {\n            openErrorNotification('error');\n            return React.createElement(Redirect, {\n              to: \"/notice\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 169\n              },\n              __self: this\n            });\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/alltopic\",\n        render: function render(props) {\n          if (auth.isLogin) {\n            return React.createElement(AllTopic, Object.assign({}, props, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 174\n              },\n              __self: this\n            }));\n          } else {\n            openErrorNotification('error');\n            return React.createElement(Redirect, {\n              to: \"/notice\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 177\n              },\n              __self: this\n            });\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/involved\",\n        render: function render(props) {\n          if (auth.isLogin) {\n            return React.createElement(Involved, Object.assign({}, props, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 182\n              },\n              __self: this\n            }));\n          } else {\n            openErrorNotification('error');\n            return React.createElement(Redirect, {\n              to: \"/notice\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 185\n              },\n              __self: this\n            });\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/notice\",\n        component: Notice,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/edit\",\n        component: EditMessage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      })))), React.createElement(_Modal, {\n        visible: this.state.editFormVisible,\n        title: \"新建主题\",\n        mask: false,\n        onOk: this.handleOk,\n        onCancel: this.handleCancel,\n        footer: [React.createElement(_Button, {\n          key: \"back\",\n          onClick: this.closeEditModal,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203\n          },\n          __self: this\n        }, \"\\u53D6\\u6D88\"), React.createElement(_Button, {\n          key: \"submit\",\n          type: \"primary\",\n          onClick: this.submitMessage,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204\n          },\n          __self: this\n        }, \"\\u63D0\\u4EA4\")],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(EditMessage, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return Homepage;\n}(React.Component);\n\nexport default Homepage;","map":{"version":3,"sources":["/Users/tstudio/IdeaProjects/MKfront/messagewiki2/src/homepage.js"],"names":["React","BrowserRouter","Router","Route","Link","Switch","Redirect","PropTypes","App","MostHotTopic","HotMessageTopic","AllTopic","Involved","Visitor","Auth","LoginForm","Notice","UserBlock","EditMessage","auth","SubMenu","Header","Content","Sider","openErrorNotification","type","message","description","style","marginTop","Homepage","props","handleVisibleChange","loginCardVisible","setState","handleOk","loading","setTimeout","visible","handleCancel","state","username","editFormVisible","height","hideLoginCard","setUsername","background","openEditModal","borderRight","padding","margin","minHeight","isLogin","closeEditModal","submitMessage","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { BrowserRouter as Router, Route, Link, Switch, Redirect } from \"react-router-dom\";\nimport PropTypes from 'prop-types';\nimport {Row, Layout, Menu, Breadcrumb, Icon, Button, Popover, notification, Card, Modal} from 'antd'\nimport App from \"./App\";\nimport './homepage.css'\nimport MostHotTopic from \"./MostHotTopic\";\nimport HotMessageTopic from \"./HotMessageTopic\";\nimport AllTopic from \"./AllTopic\";\nimport Involved from \"./Involved\";\nimport Visitor from \"./Visitor\";\nimport Auth from \"./login/auth\";\nimport LoginForm from \"./login/login\"\nimport Notice from \"./Notice\";\nimport UserBlock from \"./UserBlock\";\nimport EditMessage from \"./EditMessage\";\n\n/**\n *created by Chaoyue\n */\n\nlet auth = new Auth();//全局Auth对象\n\nconst { SubMenu } = Menu;\nconst { Header, Content, Sider } = Layout;\n\nconst openErrorNotification = (type) => {\n    notification[type]({\n        message: '未登录',\n        description: '请点击右上角登录',\n        style:{\n            marginTop: 60\n        }\n    });\n}\n\nclass Homepage extends React.Component{\n\n    constructor(props){\n        super(props);\n        this.state={\n            loginCardVisible: false,\n            username: auth.username,\n            editFormVisible: false\n        }\n    }\n\n    showLoginCard(){\n        this.setState({loginCardVisible : true})\n    }\n\n    handleVisibleChange = (loginCardVisible) => {\n        this.setState({ loginCardVisible});\n    }\n\n    hideLoginCard(loginCardVisible){\n        this.setState({\n            loginCardVisible\n        });\n    }\n\n    setUsername(username){\n        this.setState({\n            username\n        })\n    }\n\n    submitMessage(){\n\n    }\n\n    openEditModal(editFormVisible){\n        this.setState({\n            editFormVisible\n        })\n    }\n\n    closeEditModal(){\n        this.setState({\n            editFormVisible: false\n        })\n    }\n\n    handleOk = () => {\n        this.setState({ loading: true });\n        setTimeout(() => {\n            this.setState({ loading: false, visible: false });\n        }, 3000);\n    }\n\n    handleCancel = () => {\n        this.setState({ visible: false });\n    }\n\n    render(){\n\n        return(\n        <div className=\"page\">\n            <Router>\n            <Layout style={{ height: '100%'}}>\n                <Header className=\"header\">\n                    <div className=\"logo\" />\n                    <div className=\"loginPopover\">\n                        <Popover\n                            content={<LoginForm auth={auth} {...this.props} hideLoginCard={ loginCardVisible => this.hideLoginCard(loginCardVisible)} setUsername={ username => this.setUsername(username)}/>}\n                            title=\"登录\"\n                            trigger=\"click\"\n                            visible={this.state.loginCardVisible}\n                            onVisibleChange={this.handleVisibleChange}\n                            placement=\"bottomRight\"\n                        >\n                            <Button type=\"primary\" shape='circle' icon=\"login\">\n                            </Button>\n                        </Popover>\n                    </div>\n                </Header>\n                <Layout>\n                    <Sider width={230} style={{ background: '#fff' }}>\n                        <UserBlock username = {this.state.username} openEditModal={ editFormVisible => this.openEditModal(editFormVisible)}/>\n                        <Menu\n                            mode=\"inline\"\n                            defaultSelectedKeys={['0']}\n                            style={{ height: '100%', borderRight: 0 }}\n                        >\n                            <Menu.Item key=\"0\">\n                                <Icon type=\"smile\" theme=\"twoTone\"/>\n                                游客区\n                                <Link to='/visitor'/>\n                            </Menu.Item>\n                            <Menu.Item key=\"1\">\n                                    <Icon type=\"smile\" theme=\"twoTone\"/>\n                                    最热主题\n                                    <Link to='/mosthottopic'/>\n                                </Menu.Item>\n                                <Menu.Item key=\"2\">\n                                    <Icon type=\"smile\" theme=\"twoTone\"/>\n                                    最热留言\n                                    <Link to='/hotmessagetopic'></Link>\n                                </Menu.Item>\n                                <Menu.Item key=\"3\">\n                                    <Icon type=\"smile\" theme=\"twoTone\"/>\n                                    全部主题\n                                    <Link to='/alltopic'></Link>\n                                </Menu.Item>\n                                <Menu.Item key=\"4\">\n                                    <Icon type=\"smile\" theme=\"twoTone\"/>\n                                    我参与的\n                                    <Link to='/involved'/>\n                                </Menu.Item>\n\n                        </Menu>\n                    </Sider>\n                    <Layout style={{ padding: '10px 10px 10px' }}>\n                        <Content style={{ background: '#fff', padding: 24, margin: 0, minHeight: 280 }}>\n                            <Route path='/visitor' component={Visitor}/>\n                            <Route path='/mosthottopic' render={(props)=>{\n                                if (auth.isLogin){\n                                    return <MostHotTopic {...props}/>\n                                }else{\n                                    openErrorNotification('error')\n                                    return <Redirect to='/notice'/>\n                                }\n                            }}/>\n                            <Route path='/hotmessagetopic' render={(props)=>{\n                                if (auth.isLogin){\n                                    return <HotMessageTopic {...props}/>\n                                } else {\n                                    openErrorNotification('error')\n                                    return <Redirect to='/notice'/>\n                                }\n                            }}/>\n                            <Route path='/alltopic' render={(props)=>{\n                                if (auth.isLogin){\n                                    return <AllTopic {...props}/>\n                                } else {\n                                    openErrorNotification('error')\n                                    return <Redirect to='/notice'/>\n                                }\n                            }}/>\n                            <Route path='/involved' render={(props) => {\n                                if (auth.isLogin){\n                                    return <Involved {...props}/>\n                                } else {\n                                    openErrorNotification('error')\n                                    return <Redirect to='/notice'/>\n                                }\n                            }}/>\n                            <Route path='/notice' component={Notice}/>\n                            <Route path='/edit' component={EditMessage}/>\n\n                            {/*<Route path='/login' render={(props)=>{*/}\n                                {/*return <LoginForm auth={auth} {...props}/>*/}\n                            {/*}}/>*/}\n                        </Content>\n                    </Layout>\n                </Layout>\n                <Modal visible={this.state.editFormVisible}\n                       title={\"新建主题\"}\n                       mask={false}\n                       onOk={this.handleOk}\n                       onCancel={this.handleCancel}\n                       footer={[\n                           <Button key={\"back\"} onClick={this.closeEditModal}>取消</Button>\n                           ,<Button key={\"submit\"} type={\"primary\"} onClick={this.submitMessage}>提交</Button>\n                       ]}>\n                    <EditMessage/>\n                </Modal>\n            </Layout>\n\n            </Router>\n        </div>\n        )\n    }\n}\n\n\nexport default Homepage;"]},"metadata":{},"sourceType":"module"}