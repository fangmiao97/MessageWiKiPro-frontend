{"ast":null,"code":"import \"antd/es/list/style\";\nimport _List from \"antd/es/list\";\nimport \"antd/es/avatar/style\";\nimport _Avatar from \"antd/es/avatar\";\nimport \"antd/es/message/style\";\nimport _message from \"antd/es/message\";\nimport _classCallCheck from \"/Users/tstudio/IdeaProjects/MKfront/messagewiki2/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/tstudio/IdeaProjects/MKfront/messagewiki2/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/tstudio/IdeaProjects/MKfront/messagewiki2/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/tstudio/IdeaProjects/MKfront/messagewiki2/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/tstudio/IdeaProjects/MKfront/messagewiki2/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport \"antd/es/icon/style\";\nimport _Icon from \"antd/es/icon\";\nvar _jsxFileName = \"/Users/tstudio/IdeaProjects/MKfront/messagewiki2/src/MostHotTopic.js\";\nimport React, { Component } from 'react';\nimport axios from \"axios\";\nimport TopicInfo from \"./TopicInfo\";\n\nvar IconText = function IconText(_ref) {\n  var type = _ref.type,\n      text = _ref.text,\n      submit = _ref.submit;\n  return React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 7\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    onClick: submit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 8\n    },\n    __self: this\n  }, React.createElement(_Icon, {\n    type: type,\n    style: {\n      marginRight: 8\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 9\n    },\n    __self: this\n  }), text));\n};\n\nvar MostHotTopic =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(MostHotTopic, _React$Component);\n\n  function MostHotTopic(props) {\n    var _this2;\n\n    _classCallCheck(this, MostHotTopic);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(MostHotTopic).call(this, props));\n    _this2.state = {\n      topics: [],\n      topicDrawerVisible: false,\n      focusId: null,\n      oneTopicinfo: [],\n      comments: [],\n      title: \"\"\n    };\n    return _this2;\n  }\n\n  _createClass(MostHotTopic, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.getAllTopic();\n    }\n  }, {\n    key: \"getAllTopic\",\n    value: function getAllTopic() {\n      var _this = this;\n\n      axios.get(\"http://127.0.0.1:8080/getmostlikedtopics\").then(function (reponse) {\n        _this.setState({\n          topics: reponse.data\n        });\n\n        console.log(reponse.data);\n      });\n    }\n  }, {\n    key: \"openOneTopic\",\n    value: function openOneTopic(id) {\n      console.log(\"id = \", id);\n      this.setState({\n        topicDrawerVisible: true,\n        focusId: id\n      });\n    }\n  }, {\n    key: \"closeTopicDrawer\",\n    value: function closeTopicDrawer(topicDrawerVisible) {\n      this.setState({\n        topicDrawerVisible: topicDrawerVisible\n      });\n    }\n  }, {\n    key: \"like\",\n    value: function like(username, topicid) {\n      axios.get(\"http://127.0.0.1:8080/liketopic\", {\n        params: {\n          username: username,\n          topicid: topicid\n        }\n      }).then(function (response) {\n        if (response.data == 1) {\n          _message.success(\"点赞成功~！\");\n        } else {\n          _message.warning(\"算了吧别点赞了\");\n        }\n      }).catch(function (error) {\n        console.log(error);\n\n        _message.error(\"算了吧，出错了，我也不想解决\");\n      });\n    }\n  }, {\n    key: \"collect\",\n    value: function collect(username, topicid) {\n      axios.get(\"http://127.0.0.1:8080/collecttopic\", {\n        params: {\n          username: username,\n          topicid: topicid\n        }\n      }).then(function (response) {\n        if (response.data == 1) {\n          _message.success(\"收藏成功~！\");\n        } else {\n          _message.warning(\"算了吧别收藏了\");\n        }\n      }).catch(function (error) {\n        console.log(error);\n\n        _message.error(\"算了吧，出错了，我也不想解决\");\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(_List, {\n        itemLayout: \"vertical\",\n        dataSource: this.state.topics,\n        size: \"middle\",\n        pagination: {\n          pageSize: 4\n        },\n        renderItem: function renderItem(item) {\n          return React.createElement(_List.Item, {\n            key: item.id,\n            actions: [React.createElement(IconText, {\n              type: \"star\",\n              text: item.collectionsNum,\n              submit: function submit() {\n                return _this3.collect(_this3.props.username, item.id);\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 109\n              },\n              __self: this\n            }), React.createElement(IconText, {\n              type: \"like-o\",\n              text: item.likesNum,\n              submit: function submit() {\n                return _this3.like(_this3.props.username, item.id);\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 111\n              },\n              __self: this\n            }), React.createElement(IconText, {\n              type: \"message\",\n              text: item.commentsNum,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 113\n              },\n              __self: this\n            })],\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 107\n            },\n            __self: this\n          }, React.createElement(_List.Item.Meta, {\n            title: React.createElement(\"a\", {\n              onClick: function onClick() {\n                return _this3.openOneTopic(item.id);\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 116\n              },\n              __self: this\n            }, item.title),\n            description: [React.createElement(_Avatar, {\n              shape: \"square\",\n              size: \"small\",\n              src: \"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 117\n              },\n              __self: this\n            }), item.username,, \"        \", item.time],\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 115\n            },\n            __self: this\n          }), item.content);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }), React.createElement(TopicInfo, {\n        topicDrawerVisible: this.state.topicDrawerVisible,\n        closeTopicDrawer: function closeTopicDrawer(topicDrawerVisible) {\n          return _this3.closeTopicDrawer(topicDrawerVisible);\n        },\n        topicid: this.state.focusId,\n        username: this.props.username,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return MostHotTopic;\n}(React.Component);\n\nexport default MostHotTopic;","map":{"version":3,"sources":["/Users/tstudio/IdeaProjects/MKfront/messagewiki2/src/MostHotTopic.js"],"names":["React","Component","axios","TopicInfo","IconText","type","text","submit","marginRight","MostHotTopic","props","state","topics","topicDrawerVisible","focusId","oneTopicinfo","comments","title","getAllTopic","_this","get","then","reponse","setState","data","console","log","id","username","topicid","params","response","success","warning","catch","error","pageSize","item","collectionsNum","collect","likesNum","like","commentsNum","openOneTopic","time","content","closeTopicDrawer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {List, Avatar, Icon, message} from 'antd'\nimport axios from \"axios\";\nimport TopicInfo from \"./TopicInfo\";\n\nconst IconText = ({ type, text, submit}) => (\n    <span>\n        <a onClick={submit}>\n            <Icon type={type} style={{ marginRight: 8 }} />\n            {text}\n        </a>\n  </span>\n);\n\nclass MostHotTopic extends React.Component{\n\n    constructor(props){\n        super(props);\n        this.state = {\n            topics :[],\n            topicDrawerVisible:false,\n            focusId: null,\n            oneTopicinfo:[],\n            comments:[],\n            title:\"\"\n        }\n    }\n\n    componentWillMount(){\n        this.getAllTopic()\n    }\n\n\n    getAllTopic(){\n        let _this = this;\n        axios.get(\"http://127.0.0.1:8080/getmostlikedtopics\")\n            .then(function (reponse) {\n                _this.setState({\n                    topics:reponse.data\n                });\n                console.log(reponse.data)\n            })\n    }\n\n    openOneTopic(id){\n\n        console.log(\"id = \", id);\n        this.setState({\n            topicDrawerVisible: true,\n            focusId: id\n        })\n    }\n\n    closeTopicDrawer(topicDrawerVisible){\n        this.setState({\n            topicDrawerVisible\n        })\n    }\n\n    like(username, topicid){\n        axios.get(\"http://127.0.0.1:8080/liketopic\",{\n            params:{\n                username: username,\n                topicid: topicid\n            }\n        }).then(function (response) {\n            if (response.data == 1){\n                message.success(\"点赞成功~！\")\n            }  else {\n                message.warning(\"算了吧别点赞了\")\n            }\n        }).catch(function (error) {\n            console.log(error);\n            message.error(\"算了吧，出错了，我也不想解决\")\n        })\n    }\n\n    collect(username, topicid){\n        axios.get(\"http://127.0.0.1:8080/collecttopic\",{\n            params:{\n                username: username,\n                topicid: topicid\n            }\n        }).then(function (response) {\n            if (response.data == 1){\n                message.success(\"收藏成功~！\")\n            }  else {\n                message.warning(\"算了吧别收藏了\")\n            }\n        }).catch(function (error) {\n            console.log(error);\n            message.error(\"算了吧，出错了，我也不想解决\")\n        })\n    }\n\n    render() {\n        return (\n            <div>\n                <List\n                    itemLayout=\"vertical\"\n                    dataSource={this.state.topics}\n                    size=\"middle\"\n                    pagination={{\n                        pageSize: 4\n                    }}\n                    renderItem={item => (\n                        <List.Item\n                            key={item.id}\n                            actions={[<IconText type='star' text={item.collectionsNum}\n                                                submit={() => this.collect(this.props.username, item.id)}/>,\n                                <IconText type='like-o' text={item.likesNum}\n                                          submit={() => this.like(this.props.username, item.id)}/>,\n                                <IconText type='message' text={item.commentsNum}/>]}\n                        >\n                            <List.Item.Meta\n                                title={<a onClick={() => this.openOneTopic(item.id)}>{item.title}</a>}\n                                description={[<Avatar\n                                    shape={\"square\"}\n                                    size={\"small\"}\n                                    src={\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\"}/>,\n                                    item.username,\n                                    , \"        \", item.time]}/>\n                            {item.content}\n                        </List.Item>\n                    )}/>\n                <TopicInfo\n                    topicDrawerVisible={this.state.topicDrawerVisible}\n                    closeTopicDrawer={topicDrawerVisible => this.closeTopicDrawer(topicDrawerVisible)}\n                    topicid={this.state.focusId}\n                    username={this.props.username}\n                />\n            </div>\n        );\n    }\n}\n\nexport default MostHotTopic;"]},"metadata":{},"sourceType":"module"}