(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{156:function(e,t,a){},173:function(e,t,a){e.exports=a(387)},178:function(e,t,a){},183:function(e,t,a){},273:function(e,t,a){},368:function(e,t,a){},378:function(e,t,a){},382:function(e,t,a){},384:function(e,t,a){},387:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(9),r=a.n(i),c=(a(178),a(43),a(21)),s=a(13),l=a(14),u=a(17),m=a(16),p=a(18);a(183),n.Component,Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(235);var d=a(171),h=(a(56),a(10)),f=(a(144),a(100)),g=(a(242),a(105)),b=(a(72),a(39)),v=(a(44),a(11)),E=(a(145),a(76)),y=(a(122),a(33)),w=a(19),k=a.n(w),O=(a(273),function(){function e(){Object(s.a)(this,e),this.isLogin=!1,this.username="\u672a\u767b\u5f55"}return Object(l.a)(e,[{key:"login",value:function(e,t,a,n,o){var i=this;k.a.get("http://www.chmod777.top:8080/loginCertificate",{params:{username:encodeURIComponent(e),password:encodeURIComponent(t)}}).then(function(t){200===t.data?(i.isLogin=!0,i.username=e,console.log("username:",i.username),v.a.success("\u767b\u5f55\u6210\u529f\uff01"),a(),o()):500===t.data?(v.a.warning("\u5bc6\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01"),n()):(v.a.error("\u7528\u6237\u4e0d\u5b58\u5728\uff01\u8bf7\u6ce8\u518c"),n())}).catch(function(e){console.log(e)})}}]),e}()),j=y.a.Item,C=function(e){E.a[e]({message:"\u6ce8\u518c\u9519\u8bef",description:"\u8bf7\u66f4\u6362\u7528\u6237\u540d\u6216\u8054\u7cfb\u7ba1\u7406\u5458"})},T=function(e){E.a[e]({message:"\u6ce8\u518c\u6210\u529f",description:"\u8fd4\u56de\u767b\u5f55\u9875"})},S=y.a.create()(function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={confirmDirty:!1,registerLoading:!1},a.register=function(e,t,a,n){k.a.get("http://www.chmod777.top:8080/register",{params:{username:encodeURIComponent(e),password:encodeURIComponent(t),email:encodeURIComponent(a)}}).then(function(e){console.log("register response data:",e.data),0===e.data?C("error"):(T("success"),n())}).catch(function(e){C("error"),console.log(e)})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||(v.a.loading("\u6ce8\u518c\u4e2d...",2.5),console.log("Received values of form: ",t),console.log(t.username),a.register(t.username,t.password,t.email,function(){a.props.closeRegisterModel(!1)}))})},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.compareToFirstPassword=function(e,t,n){var o=a.props.form;t&&t!==o.getFieldValue("password")?n("\u8f93\u5165\u5bc6\u7801\u4e0d\u4e00\u81f4"):n()},a.validateToNextPassword=function(e,t,n){var o=a.props.form;t&&a.state.confirmDirty&&o.validateFields(["confirm"],{force:!0}),n()},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=(e.onCreate,e.form.getFieldDecorator);return o.a.createElement(f.a,{visible:t,title:"\u6ce8\u518c",onCancel:a,footer:null},o.a.createElement(y.a,{layout:"vertical",onSubmit:this.handleSubmit},o.a.createElement(j,{label:"\u7528\u6237\u540d"},n("username",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}]})(o.a.createElement(b.a,null))),o.a.createElement(j,{label:"\u8bf7\u8f93\u5165\u5bc6\u7801"},n("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"},{validator:this.validateToNextPassword}]})(o.a.createElement(b.a,{type:"password"}))),o.a.createElement(j,{label:"\u8bf7\u786e\u8ba4\u5bc6\u7801"},n("confirm",{rules:[{required:!0,message:"\u8bf7\u786e\u8ba4\u8f93\u5165\u7684\u5bc6\u7801"},{validator:this.compareToFirstPassword}]})(o.a.createElement(b.a,{type:"password",onBlur:this.handleConfirmBlur}))),o.a.createElement(j,{label:"\u8bf7\u8f93\u5165\u90ae\u7bb1\u5730\u5740"},n("email",{rules:[{type:"email",message:"\u8bf7\u8f93\u5165\u6b63\u786e\u90ae\u7bb1!"},{required:!0,message:"\u8bf7\u8f93\u5165\u90ae\u7bb1"}]})(o.a.createElement(b.a,null))),o.a.createElement(j,{className:"collection-create-form_last-form-item"},n("modifier",{initialValue:"publicUser"})(o.a.createElement(g.a.Group,null,o.a.createElement(g.a,{value:"publicUser"},"\u666e\u901a\u7528\u6237"),o.a.createElement(g.a,{value:"adm"},"\u7ba1\u7406\u5458")))),o.a.createElement(j,null,o.a.createElement(c.a,{type:"primary",htmlType:"submit",className:"registerButton",loading:this.state.registerLoading},"\u6ce8\u518c"))))}}]),t}(o.a.Component)),I=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.setState({loading:!0});try{a.props.form.validateFields(function(e,t){e||(console.log("Received values of form: ",t),(null==a.props.auth?new(new O):a.props.auth).login(t.username,t.password,function(){a.setState({loading:!1}),a.props.hideLoginCard(!1)},function(){return a.setState({loading:!1})},function(){return a.props.setUsername(t.username)}))})}catch(e){console.log(e)}},a.showRegisterModal=function(){a.setState({visible:!0}),a.props.hideLoginCard(!1)},a.handleCancel=function(){a.setState({visible:!1})},a.handleCreate=function(){var e=a.formRef.props.form;e.validateFields(function(t,n){t||(console.log("Received values of form: ",n),e.resetFields(),a.setState({visible:!1}))})},a.saveFormRef=function(e){a.formRef=e},a.state={loading:!1,visible:!1,username:"",password:""},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"closeRegisterModel",value:function(e){this.setState({visible:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.form,n=(t.visible,t.onCancle,a.getFieldDecorator);return o.a.createElement("div",null,o.a.createElement(y.a,{onSubmit:this.handleSubmit,className:"login-form"},o.a.createElement(j,null,n("username",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\u9774\u9774"}]})(o.a.createElement(b.a,{prefix:o.a.createElement(h.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u7528\u6237\u540d"}))),o.a.createElement(j,null,n("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f60\u7684\u5bc6\u7801"}]})(o.a.createElement(b.a,{prefix:o.a.createElement(h.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u5bc6\u7801"}))),o.a.createElement(j,null,n("remember",{valuePropName:"checked",initialValue:!1})(o.a.createElement(d.a,null,"\u8bb0\u4f4f\u6211")),o.a.createElement("a",{className:"login-form-forgot",href:""},"\u5fd8\u8bb0\u5bc6\u7801"),o.a.createElement(c.a,{type:"primary",htmlType:"submit",className:"login-form-button",loading:this.state.loading},"\u767b\u5f55"),"Or ",o.a.createElement("a",{onClick:this.showRegisterModal},"\u5feb\u6765\u6ce8\u518c"))),o.a.createElement(S,{wrappedComponentRef:this.saveFormRef,visible:this.state.visible,onCancel:this.handleCancel,onCreate:this.handleCreate,closeRegisterModel:function(t){return e.closeRegisterModel(t)}}))}}]),t}(o.a.Component),D=y.a.create()(I),x=(a(344),a(169)),V=(a(347),a(60)),R=(a(388),a(61)),L=a(392),M=a(389),N=a(391),F=a(390),A=(a(156),a(66),a(20)),z=(a(57),a(32)),q=(a(365),a(170)),U=(a(368),b.a.TextArea),B=y.a.Item,X=y.a.create()(function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={submitButtonLoading:!1},a.submitComment=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||(console.log("Received values of form: ",t),console.log(a.props.username),"\u672a\u767b\u5f55"===a.props.username?v.a.error("\u8bf7\u767b\u5f55\uff01"):(a.setState({submitButtonLoading:!0}),a.submit(a.props.topicid,a.props.username,t.content,function(){a.setState({submitButtonLoading:!1})})))})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"submit",value:function(e,t,a,n){k.a.get("http://www.chmod777.top:8080/submitcomment",{params:{topicid:e,username:encodeURIComponent(t),content:encodeURIComponent(a)}}).then(function(e){0!==e.data?(v.a.success("\u7559\u8a00\u6210\u529f\uff01"),n()):(v.a.error("something wrong"),n())}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this.props,t=(e.editFormVisible,e.handleCancel,e.handleOk,e.form.getFieldDecorator);return o.a.createElement("div",null,o.a.createElement(y.a,{layout:"vertical",onSubmit:this.submitComment},o.a.createElement(B,{label:"\u65b0\u589e\u7559\u8a00"},t("content")(o.a.createElement(U,{rows:6}))),o.a.createElement(B,null,o.a.createElement(c.a,{type:"primary",htmlType:"submit",className:"submitButton",loading:this.state.submitButtonLoading},"\u53d1\u5e03"))))}}]),t}(o.a.Component)),W=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={topicinfo:[],comments:[],topicid:a.props.topicid,title:""},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"getTopicInfo",value:function(e){var t=this;console.log("topicid=",this.state.topicid),k.a.get("http://www.chmod777.top:8080/getonetopicinfo",{params:{topicid:e}}).then(function(e){t.setState({topicinfo:e.data,title:e.data.title}),console.log(e.data)}).catch(function(e){console.log(e)})}},{key:"getTopicComments",value:function(e){var t=this;k.a.get("http://www.chmod777.top:8080/gettopiccomments",{params:{topicid:e}}).then(function(e){t.setState({comments:e.data}),console.log(e.data)})}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.state.topicid!==e.topicid&&(this.setState({topicid:e.topicid},function(){t.getTopicInfo(e.topicid),t.getTopicComments(e.topicid)}),console.log("topicinfo=",this.state.topicinfo),console.log("comments:",this.state.comments))}},{key:"componentWillMount",value:function(){this.getTopicInfo(this.state.topicid),this.getTopicComments(this.state.topicid)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(q.a,{width:600,placement:"right",visible:this.props.topicDrawerVisible,onClose:function(){return e.props.closeTopicDrawer(!1)},title:"\u7559\u8a00\u8be6\u60c5"},o.a.createElement(A.a,{itemLayout:"vertical",dataSource:this.state.comments,renderItem:function(e){return o.a.createElement(A.a.Item,{key:e.commentId,extra:o.a.createElement(z.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"})},o.a.createElement(A.a.Item.Meta,{title:e.username,description:e.commentTime}),e.content)}}),o.a.createElement("div",{className:"commentText"},o.a.createElement(X,{username:this.props.username,topicid:this.state.topicid}))))}}]),t}(o.a.Component),P=function(e){var t=e.type,a=e.text,n=e.submit;return o.a.createElement("span",null,o.a.createElement("a",{onClick:n},o.a.createElement(h.a,{type:t,style:{marginRight:8}}),a))},H=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={topics:[],topicDrawerVisible:!1,focusId:null,oneTopicinfo:[],comments:[],title:""},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.getAllTopic()}},{key:"getAllTopic",value:function(){var e=this;k.a.get("http://www.chmod777.top:8080/getmostlikedtopics").then(function(t){e.setState({topics:t.data}),console.log(t.data)})}},{key:"openOneTopic",value:function(e){console.log("id = ",e),this.setState({topicDrawerVisible:!0,focusId:e})}},{key:"closeTopicDrawer",value:function(e){this.setState({topicDrawerVisible:e})}},{key:"like",value:function(e,t){k.a.get("http://www.chmod777.top:8080/liketopic",{params:{username:e,topicid:t}}).then(function(e){1==e.data?v.a.success("\u70b9\u8d5e\u6210\u529f~\uff01"):v.a.warning("\u7b97\u4e86\u5427\u522b\u70b9\u8d5e\u4e86")}).catch(function(e){console.log(e),v.a.error("\u7b97\u4e86\u5427\uff0c\u51fa\u9519\u4e86\uff0c\u6211\u4e5f\u4e0d\u60f3\u89e3\u51b3")})}},{key:"collect",value:function(e,t){k.a.get("http://www.chmod777.top:8080/collecttopic",{params:{username:e,topicid:t}}).then(function(e){1==e.data?v.a.success("\u6536\u85cf\u6210\u529f~\uff01"):v.a.warning("\u7b97\u4e86\u5427\u522b\u6536\u85cf\u4e86")}).catch(function(e){console.log(e),v.a.error("\u7b97\u4e86\u5427\uff0c\u51fa\u9519\u4e86\uff0c\u6211\u4e5f\u4e0d\u60f3\u89e3\u51b3")})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(A.a,{itemLayout:"vertical",dataSource:this.state.topics,size:"middle",pagination:{pageSize:4},renderItem:function(t){return o.a.createElement(A.a.Item,{key:t.id,actions:[o.a.createElement(P,{type:"star",text:t.collectionsNum,submit:function(){return e.collect(e.props.username,t.id)}}),o.a.createElement(P,{type:"like-o",text:t.likesNum,submit:function(){return e.like(e.props.username,t.id)}}),o.a.createElement(P,{type:"message",text:t.commentsNum})]},o.a.createElement(A.a.Item.Meta,{title:o.a.createElement("a",{onClick:function(){return e.openOneTopic(t.id)}},t.title),description:[o.a.createElement(z.a,{shape:"square",size:"small",src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),t.username,,"        ",t.time]}),t.content)}}),o.a.createElement(W,{topicDrawerVisible:this.state.topicDrawerVisible,closeTopicDrawer:function(t){return e.closeTopicDrawer(t)},topicid:this.state.focusId,username:this.props.username}))}}]),t}(o.a.Component),Y=function(e){var t=e.type,a=e.text,n=e.submit;return o.a.createElement("span",null,o.a.createElement("a",{onClick:n},o.a.createElement(h.a,{type:t,style:{marginRight:8}}),a))},J=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={topics:[],topicDrawerVisible:!1,focusId:null,oneTopicinfo:[],comments:[],title:""},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.getAllTopic()}},{key:"getAllTopic",value:function(){var e=this;k.a.get("http://www.chmod777.top:8080/getmostcommenttopics").then(function(t){e.setState({topics:t.data}),console.log(t.data)})}},{key:"openOneTopic",value:function(e){console.log("id = ",e),this.setState({topicDrawerVisible:!0,focusId:e})}},{key:"closeTopicDrawer",value:function(e){this.setState({topicDrawerVisible:e})}},{key:"like",value:function(e,t){k.a.get("http://www.chmod777.top:8080/liketopic",{params:{username:e,topicid:t}}).then(function(e){1==e.data?v.a.success("\u70b9\u8d5e\u6210\u529f~\uff01"):v.a.warning("\u7b97\u4e86\u5427\u522b\u70b9\u8d5e\u4e86")}).catch(function(e){console.log(e),v.a.error("\u7b97\u4e86\u5427\uff0c\u51fa\u9519\u4e86\uff0c\u6211\u4e5f\u4e0d\u60f3\u89e3\u51b3")})}},{key:"collect",value:function(e,t){k.a.get("http://www.chmod777.top:8080/collecttopic",{params:{username:e,topicid:t}}).then(function(e){1==e.data?v.a.success("\u6536\u85cf\u6210\u529f~\uff01"):v.a.warning("\u7b97\u4e86\u5427\u522b\u6536\u85cf\u4e86")}).catch(function(e){console.log(e),v.a.error("\u7b97\u4e86\u5427\uff0c\u51fa\u9519\u4e86\uff0c\u6211\u4e5f\u4e0d\u60f3\u89e3\u51b3")})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(A.a,{itemLayout:"vertical",dataSource:this.state.topics,size:"middle",pagination:{pageSize:4},renderItem:function(t){return o.a.createElement(A.a.Item,{key:t.id,actions:[o.a.createElement(Y,{type:"star",text:t.collectionsNum,submit:function(){return e.collect(e.props.username,t.id)}}),o.a.createElement(Y,{type:"like-o",text:t.likesNum,submit:function(){return e.like(e.props.username,t.id)}}),o.a.createElement(Y,{type:"message",text:t.commentsNum})]},o.a.createElement(A.a.Item.Meta,{title:o.a.createElement("a",{onClick:function(){return e.openOneTopic(t.id)}},t.title),description:[o.a.createElement(z.a,{shape:"square",size:"small",src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),t.username,,"        ",t.time]}),t.content)}}),o.a.createElement(W,{topicDrawerVisible:this.state.topicDrawerVisible,closeTopicDrawer:function(t){return e.closeTopicDrawer(t)},topicid:this.state.focusId,username:this.props.username}))}}]),t}(o.a.Component),G=(a(159),a(78)),K=(a(378),G.a.Meta,function(e){var t=e.type,a=e.text,n=e.submit;return o.a.createElement("span",null,o.a.createElement("a",{onClick:n},o.a.createElement(h.a,{type:t,style:{marginRight:8}}),a))}),$=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={topics:[],topicDrawerVisible:!1,focusId:null,oneTopicinfo:[],comments:[],title:""},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.getAllTopic()}},{key:"getAllTopic",value:function(){var e=this;k.a.get("http://www.chmod777.top:8080/getAllTopics").then(function(t){e.setState({topics:t.data}),console.log(t.data)})}},{key:"openOneTopic",value:function(e){console.log("id = ",e),this.setState({topicDrawerVisible:!0,focusId:e})}},{key:"closeTopicDrawer",value:function(e){this.setState({topicDrawerVisible:e})}},{key:"like",value:function(e,t){k.a.get("http://www.chmod777.top:8080/liketopic",{params:{username:e,topicid:t}}).then(function(e){1==e.data?v.a.success("\u70b9\u8d5e\u6210\u529f~\uff01"):v.a.warning("\u7b97\u4e86\u5427\u522b\u70b9\u8d5e\u4e86")}).catch(function(e){console.log(e),v.a.error("\u7b97\u4e86\u5427\uff0c\u51fa\u9519\u4e86\uff0c\u6211\u4e5f\u4e0d\u60f3\u89e3\u51b3")})}},{key:"collect",value:function(e,t){k.a.get("http://www.chmod777.top:8080/collecttopic",{params:{username:e,topicid:t}}).then(function(e){1==e.data?v.a.success("\u6536\u85cf\u6210\u529f~\uff01"):v.a.warning("\u7b97\u4e86\u5427\u522b\u6536\u85cf\u4e86")}).catch(function(e){console.log(e),v.a.error("\u7b97\u4e86\u5427\uff0c\u51fa\u9519\u4e86\uff0c\u6211\u4e5f\u4e0d\u60f3\u89e3\u51b3")})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(A.a,{itemLayout:"vertical",dataSource:this.state.topics,size:"middle",pagination:{pageSize:4},renderItem:function(t){return o.a.createElement(A.a.Item,{key:t.id,actions:[o.a.createElement(K,{type:"star",text:t.collectionsNum,submit:function(){return e.collect(e.props.username,t.id)}}),o.a.createElement(K,{type:"like-o",text:t.likesNum,submit:function(){return e.like(e.props.username,t.id)}}),o.a.createElement(K,{type:"message",text:t.commentsNum})]},o.a.createElement(A.a.Item.Meta,{title:o.a.createElement("a",{onClick:function(){return e.openOneTopic(t.id)}},t.title),description:[o.a.createElement(z.a,{shape:"square",size:"small",src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),t.username,,"        ",t.time]}),t.content)}}),o.a.createElement(W,{topicDrawerVisible:this.state.topicDrawerVisible,closeTopicDrawer:function(t){return e.closeTopicDrawer(t)},topicid:this.state.focusId,username:this.props.username}))}}]),t}(o.a.Component),_=function(e){var t=e.type,a=e.text,n=e.submit;return o.a.createElement("span",null,o.a.createElement("a",{onClick:n},o.a.createElement(h.a,{type:t,style:{marginRight:8}}),a))},Q=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={topics:[],topicDrawerVisible:!1,focusId:null,oneTopicinfo:[],comments:[],title:""},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.getAllTopic(this.props.username)}},{key:"getAllTopic",value:function(e){var t=this;k.a.get("http://www.chmod777.top:8080/getinvolvedtopics",{params:{username:e}}).then(function(e){t.setState({topics:e.data}),console.log(e.data)})}},{key:"openOneTopic",value:function(e){console.log("id = ",e),this.setState({topicDrawerVisible:!0,focusId:e})}},{key:"closeTopicDrawer",value:function(e){this.setState({topicDrawerVisible:e})}},{key:"like",value:function(e,t){k.a.get("http://www.chmod777.top:8080/liketopic",{params:{username:e,topicid:t}}).then(function(e){1==e.data?v.a.success("\u70b9\u8d5e\u6210\u529f~\uff01"):v.a.warning("\u7b97\u4e86\u5427\u522b\u70b9\u8d5e\u4e86")}).catch(function(e){console.log(e),v.a.error("\u7b97\u4e86\u5427\uff0c\u51fa\u9519\u4e86\uff0c\u6211\u4e5f\u4e0d\u60f3\u89e3\u51b3")})}},{key:"collect",value:function(e,t){k.a.get("http://www.chmod777.top:8080/collecttopic",{params:{username:e,topicid:t}}).then(function(e){1==e.data?v.a.success("\u6536\u85cf\u6210\u529f~\uff01"):v.a.warning("\u7b97\u4e86\u5427\u522b\u6536\u85cf\u4e86")}).catch(function(e){console.log(e),v.a.error("\u7b97\u4e86\u5427\uff0c\u51fa\u9519\u4e86\uff0c\u6211\u4e5f\u4e0d\u60f3\u89e3\u51b3")})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(A.a,{itemLayout:"vertical",dataSource:this.state.topics,size:"middle",pagination:{pageSize:4},renderItem:function(t){return o.a.createElement(A.a.Item,{key:t.id,actions:[o.a.createElement(_,{type:"star",text:t.collectionsNum,submit:function(){return e.collect(e.props.username,t.id)}}),o.a.createElement(_,{type:"like-o",text:t.likesNum,submit:function(){return e.like(e.props.username,t.id)}}),o.a.createElement(_,{type:"message",text:t.commentsNum})]},o.a.createElement(A.a.Item.Meta,{title:o.a.createElement("a",{onClick:function(){return e.openOneTopic(t.id)}},t.title),description:[o.a.createElement(z.a,{shape:"square",size:"small",src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),t.username,,"        ",t.time]}),t.content)}}),o.a.createElement(W,{topicDrawerVisible:this.state.topicDrawerVisible,closeTopicDrawer:function(t){return e.closeTopicDrawer(t)},topicid:this.state.focusId,username:this.props.username}))}}]),t}(o.a.Component),Z=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,"Visitor")}}]),t}(o.a.Component),ee=function(e){var t=e.type,a=e.text;return o.a.createElement("span",null,o.a.createElement(h.a,{type:t,style:{marginRight:8}}),a)},te=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={topics:[],topicDrawerVisible:!1,focusId:null,oneTopicinfo:[],comments:[],title:""},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.getAllTopic()}},{key:"getAllTopic",value:function(){var e=this;k.a.get("http://www.chmod777.top:8080/getmostlikedtopics").then(function(t){e.setState({topics:t.data}),console.log(t.data)})}},{key:"openOneTopic",value:function(){v.a.warning("\u8bf7\u5148\u767b\u5f55\u624d\u80fd\u67e5\u770b\u7559\u8a00\u8be6\u60c5~")}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(A.a,{itemLayout:"vertical",dataSource:this.state.topics,size:"middle",pagination:{pageSize:4},renderItem:function(t){return o.a.createElement(A.a.Item,{key:t.id,actions:[o.a.createElement(ee,{type:"star",text:t.collectionsNum,submit:function(){return e.collect(e.props.username,t.id)}}),o.a.createElement(ee,{type:"like-o",text:t.likesNum,submit:function(){return e.like(e.props.username,t.id)}}),o.a.createElement(ee,{type:"message",text:t.commentsNum})]},o.a.createElement(A.a.Item.Meta,{title:o.a.createElement("a",{onClick:function(){return e.openOneTopic()}},t.title),description:[o.a.createElement(z.a,{shape:"square",size:"small",src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),t.username,,"        ",t.time]}),t.content)}}))}}]),t}(o.a.Component),ae=(a(382),G.a.Meta),ne=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={avatarSrc:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",username:a.props.username},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.state.username!==e.username&&this.setState({username:e.username})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(G.a,{bordered:!1,actions:[o.a.createElement(c.a,{type:"dashed",icon:"setting",shape:"circle"}),o.a.createElement(c.a,{type:"dashed",icon:"edit",shape:"circle",onClick:function(){return e.props.openEditModal(!0)}})]},o.a.createElement(ae,{avatar:o.a.createElement(z.a,{src:this.state.avatarSrc}),title:this.state.username,description:"\u6b22\u8fce\u4f60"})))}}]),t}(o.a.Component),oe=(a(157),a(51)),ie=(a(384),y.a.Item),re=b.a.TextArea,ce=oe.a.Option,se=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).submitEditMessage=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||(console.log("Received values of form: ",t),console.log(a.props.username),"\u672a\u767b\u5f55"===a.props.username?v.a.error("\u8bf7\u767b\u5f55\uff01"):a.submit(a.props.username,t.title,t.content,function(){a.props.closeEditModal(!1)}))})},a.state={visible:!1,submitButtonLoading:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"submit",value:function(e,t,a,n){k.a.get("http://www.chmod777.top:8080/submitTopic",{params:{username:encodeURIComponent(e),title:encodeURIComponent(t),content:encodeURIComponent(a)}}).then(function(e){0===e.data?(v.a.error("\u53d1\u5e03\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\uff01"),n()):(v.a.success("\u53d1\u5e03\u6210\u529f\uff01"),n())}).catch(function(e){v.a.error("\u7f51\u7edc\u6709\u9519\u8bef\u5427\u5c11\u5e74"),n()})}},{key:"render",value:function(){var e=this.props,t=e.editFormVisible,a=e.handleCancel,n=e.handleOk,i=e.form.getFieldDecorator;return o.a.createElement("div",null,o.a.createElement(f.a,{visible:t,title:"\u65b0\u5efa\u4e3b\u9898",mask:!1,onOk:n,onCancel:a,footer:null},o.a.createElement(y.a,{layout:"vertical",onSubmit:this.submitEditMessage},o.a.createElement(ie,{label:"\u6807\u9898"},i("title",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6807\u9898"}]})(o.a.createElement(b.a,null))),o.a.createElement(ie,{label:"\u5185\u5bb9"},i("content")(o.a.createElement(re,{rows:4}))),o.a.createElement(ie,{label:"\u9009\u62e9\u7ed3\u70b9"},i("select")(o.a.createElement(oe.a,{placeholder:"\u9009\u62e9\u53d1\u5e03\u7ed3\u70b9"},o.a.createElement(ce,{value:"campus"},"\u6821\u56ed"),o.a.createElement(ce,{value:"computer"},"\u8ba1\u7b97\u673a"),o.a.createElement(ce,{value:"fun"},"\u597d\u73a9")))),o.a.createElement(ie,null,o.a.createElement(c.a,{type:"primary",htmlType:"submit",className:"submitButton",loading:this.state.submitButtonLoading},"\u53d1\u5e03")))))}}]),t}(o.a.Component),le=y.a.create()(se),ue=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"noLoginInvolved"},"\u8bf7\u767b\u5f55\uff0c\u67e5\u770b\u53c2\u4e0e\u5185\u5bb9")}}]),t}(o.a.Component),me=new O,pe=(R.a.SubMenu,V.a.Header),de=V.a.Content,he=V.a.Sider,fe=function(e){E.a[e]({message:"\u672a\u767b\u5f55",description:"\u8bf7\u70b9\u51fb\u53f3\u4e0a\u89d2\u767b\u5f55",style:{marginTop:60}})},ge=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleVisibleChange=function(e){a.setState({loginCardVisible:e})},a.handleCancel=function(){a.setState({editFormVisible:!1})},a.saveFormRef=function(e){a.formRef=e},a.state={loginCardVisible:!1,username:me.username,editFormVisible:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"showLoginCard",value:function(){this.setState({loginCardVisible:!0})}},{key:"hideLoginCard",value:function(e){this.setState({loginCardVisible:e})}},{key:"setUsername",value:function(e){this.setState({username:e})}},{key:"submitMessage",value:function(){alert("hauhauhua")}},{key:"openEditModal",value:function(e){this.setState({editFormVisible:e})}},{key:"closeEditModal",value:function(e){this.setState({editFormVisible:e})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"page"},o.a.createElement(L.a,null,o.a.createElement(V.a,{style:{height:"100%"}},o.a.createElement(pe,{className:"header"},o.a.createElement("div",{className:"logo"},"MessageWikiPro"),o.a.createElement("div",{className:"loginPopover"},o.a.createElement(x.a,{content:o.a.createElement(D,Object.assign({auth:me},this.props,{hideLoginCard:function(t){return e.hideLoginCard(t)},setUsername:function(t){return e.setUsername(t)}})),title:"\u767b\u5f55",trigger:"click",visible:this.state.loginCardVisible,onVisibleChange:this.handleVisibleChange,placement:"bottomRight"},o.a.createElement(c.a,{type:"primary",shape:"circle",icon:"login"})))),o.a.createElement(V.a,null,o.a.createElement(he,{width:230,style:{background:"#fff"}},o.a.createElement(ne,{username:this.state.username,openEditModal:function(t){return e.openEditModal(t)}}),o.a.createElement(R.a,{mode:"inline",defaultSelectedKeys:["1"],style:{borderRight:0}},o.a.createElement(R.a.Item,{key:"1"},o.a.createElement(h.a,{type:"star",theme:"twoTone",twoToneColor:"#35ce7b"}),"\u6700\u70ed\u4e3b\u9898",o.a.createElement(M.a,{to:"/mosthottopic"})),o.a.createElement(R.a.Item,{key:"2"},o.a.createElement(h.a,{type:"like",theme:"twoTone",twoToneColor:"#35ce7b"}),"\u6700\u70ed\u7559\u8a00",o.a.createElement(M.a,{to:"/hotmessagetopic"})),o.a.createElement(R.a.Item,{key:"3"},o.a.createElement(h.a,{type:"bulb",theme:"twoTone",twoToneColor:"#35ce7b"}),"\u5168\u90e8\u4e3b\u9898",o.a.createElement(M.a,{to:"/alltopic"})),o.a.createElement(R.a.Item,{key:"4"},o.a.createElement(h.a,{type:"eye",theme:"twoTone",twoToneColor:"#35ce7b"}),"\u6211\u53c2\u4e0e\u7684",o.a.createElement(M.a,{to:"/involved"})))),o.a.createElement(V.a,{style:{background:"#fafafa",padding:"10px 10px 10px"}},o.a.createElement(de,{style:{background:"#fff",padding:"0px 20px 10px",margin:0}},o.a.createElement(N.a,{path:"/visitor",component:Z}),o.a.createElement(N.a,{path:"/mosthottopic",render:function(t){return me.isLogin?o.a.createElement(H,Object.assign({},t,{username:e.state.username})):(fe("error"),o.a.createElement(F.a,{to:"/notice"}))}}),o.a.createElement(N.a,{path:"/hotmessagetopic",render:function(t){return me.isLogin?o.a.createElement(J,Object.assign({},t,{username:e.state.username})):(fe("error"),o.a.createElement(F.a,{to:"/notice"}))}}),o.a.createElement(N.a,{path:"/alltopic",render:function(t){return me.isLogin?o.a.createElement($,Object.assign({},t,{username:e.state.username})):(fe("error"),o.a.createElement(F.a,{to:"/notice"}))}}),o.a.createElement(N.a,{path:"/involved",render:function(t){return me.isLogin?o.a.createElement(Q,Object.assign({},t,{username:e.state.username})):(fe("error"),o.a.createElement(F.a,{to:"/noLoginInvolved"}))}}),o.a.createElement(N.a,{path:"/notice",component:te}),o.a.createElement(N.a,{path:"/edit",component:le}),o.a.createElement(N.a,{path:"/noLoginInvolved",component:ue})))),o.a.createElement(le,{wrappedComponentRef:this.saveFormRef,editFormVisible:this.state.editFormVisible,handleCancel:this.handleCancel,username:this.state.username,closeEditModal:function(t){return e.closeEditModal(t)}}))))}}]),t}(o.a.Component);r.a.render(o.a.createElement(ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[173,2,1]]]);
//# sourceMappingURL=main.7f660f14.chunk.js.map